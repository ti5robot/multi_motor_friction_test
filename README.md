# Robot Friction Test System

[![Build Status](https://img.shields.io/badge/build-passing-brightgreen.svg)](https://github.com/your-username/robot-friction-test)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-Linux-lightgrey.svg)](https://www.linux.org/)
[![Language](https://img.shields.io/badge/language-C++-00599C.svg)](https://isocpp.org/)

ä¸€ä¸ªä¸“ä¸º32å…³èŠ‚æœºå™¨äººè®¾è®¡çš„æ‘©æ“¦åŠ›æµ‹è¯•ç³»ç»Ÿï¼ŒåŸºäºCANæ€»çº¿é€šä¿¡å’ŒPTåè®®ï¼Œç”¨äºæ£€æµ‹å…³èŠ‚æ‘©æ“¦åŠ›ç‰¹æ€§ï¼Œç¡®ä¿æœºå™¨äººéƒ¨ç½²å‰çš„è´¨é‡æ§åˆ¶ã€‚

## ğŸ¯ ä¸»è¦ç‰¹æ€§

- **32å…³èŠ‚å…¨è¦†ç›–** - æ”¯æŒ1-40ä¸ªå…³èŠ‚IDï¼Œè¦†ç›–å®Œæ•´æœºå™¨äººç³»ç»Ÿ
- **PTåè®®æµ‹è¯•** - åŸºäºç”µæœºç«¯å®é™…ä»£ç å®ç°çš„æ­£ç¡®PTæ¨¡å¼åè®®
- **çµæ´»æµ‹è¯•æ¨¡å¼** - æ”¯æŒå•å…³èŠ‚ã€å…³èŠ‚ç»„ã€æ‰¹é‡å’Œå…¨éƒ¨å…³èŠ‚æµ‹è¯•
- **å®æ—¶ç›‘æ§** - æä¾›è¯¦ç»†çš„æµ‹è¯•è¿›åº¦ã€æ¸©åº¦å’Œç”µæµç›‘æ§
- **å®‰å…¨ä¿æŠ¤** - å†…ç½®å®‰å…¨é™åˆ¶å’Œç´§æ€¥åœæ­¢åŠŸèƒ½
- **æ•°æ®è®°å½•** - è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†æµ‹è¯•æŠ¥å‘Šå’ŒåŸå§‹æ•°æ®
- **å¹¶è¡Œæµ‹è¯•** - æ”¯æŒå¤šå…³èŠ‚å¹¶è¡Œæµ‹è¯•ä»¥æé«˜æ•ˆç‡

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚
- CAN-USBè½¬æ¢å™¨ (æ”¯æŒUSBCAN2åè®®)
- 32å…³èŠ‚æœºå™¨äººç³»ç»Ÿ
- Linuxæ“ä½œç³»ç»Ÿ (Ubuntu 18.04+æ¨è)

### è½¯ä»¶ä¾èµ–
```bash
# åŸºç¡€ç¼–è¯‘å·¥å…·
sudo apt-get install build-essential cmake

# CANé€šä¿¡åº“
sudo apt-get install libcan-dev

# çº¿ç¨‹æ”¯æŒ
sudo apt-get install libpthread-stubs0-dev
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/your-username/robot-friction-test.git
cd robot-friction-test
```

### 2. ç¼–è¯‘ç¨‹åº
```bash
# ç¼–è¯‘PTåè®®æµ‹è¯•ç¨‹åº
g++ -o correct_pt_test correct_pt_friction_test.cpp -lcontrolcan -lpthread

# æˆ–è€…ä½¿ç”¨Makefile
make all
```

### 3. è¿è¡Œæµ‹è¯•
```bash
# æµ‹è¯•æ‰€æœ‰32ä¸ªå…³èŠ‚
./correct_pt_test --all-joints

# æµ‹è¯•å•ä¸ªå…³èŠ‚
./correct_pt_test -m 1

# äº¤äº’æ¨¡å¼
./correct_pt_test
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `--all-joints` | æµ‹è¯•æ‰€æœ‰å…³èŠ‚ | `./correct_pt_test --all-joints` |
| `-m, --motor ID` | æµ‹è¯•å•ä¸ªå…³èŠ‚ | `./correct_pt_test -m 1` |
| `-j, --joints LIST` | æµ‹è¯•æŒ‡å®šå…³èŠ‚ | `./correct_pt_test -j "1,2,3"` |
| `--left-arm` | æµ‹è¯•å·¦è‡‚å…³èŠ‚ | `./correct_pt_test --left-arm` |
| `--debug` | å¯ç”¨è°ƒè¯•æ¨¡å¼ | `./correct_pt_test --debug` |

### å…³èŠ‚ç»„å®šä¹‰

| å…³èŠ‚ç»„ | å…³èŠ‚IDèŒƒå›´ | æè¿° |
|--------|------------|------|
| å·¦è‡‚ | 1-8 | å·¦è‡‚7ä¸ªå…³èŠ‚ + å·¦æ‰‹ |
| å³è‡‚ | 9-16 | å³è‡‚7ä¸ªå…³èŠ‚ + å³æ‰‹ |
| å·¦è…¿ | 17-24 | å·¦è…¿6ä¸ªå…³èŠ‚ + å·¦è„š |
| å³è…¿ | 25-32 | å³è…¿6ä¸ªå…³èŠ‚ + å³è„š |
| ä¸ŠåŠèº« | 1-16 | åŒè‡‚å…³èŠ‚ |
| ä¸‹åŠèº« | 17-32 | åŒè…¿å…³èŠ‚ |

### é«˜çº§ç”¨æ³•

```bash
# å¹¶è¡Œæµ‹è¯•æé«˜æ•ˆç‡
./correct_pt_test --all-joints --parallel --batch-size 8

# è‡ªå®šä¹‰æµ‹è¯•å‚æ•°
./correct_pt_test -j "1-8" --max-torque 2.0 --torque-step 0.05

# ä¿å­˜åŸå§‹æ•°æ®
./correct_pt_test --left-arm --save-raw left_arm_data.csv

# é™é»˜æ¨¡å¼æ‰¹é‡æµ‹è¯•
./correct_pt_test --all-joints --quiet --output batch_results.txt
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### è¾“å‡ºæ–‡ä»¶
- **æµ‹è¯•æŠ¥å‘Š** - `pt_friction_results.txt` (é»˜è®¤)
- **åŸå§‹æ•°æ®** - å¯é€‰çš„CSVæ ¼å¼è¯¦ç»†æ•°æ®
- **æ—¥å¿—æ–‡ä»¶** - æµ‹è¯•è¿‡ç¨‹çš„è¯¦ç»†æ—¥å¿—

### ç»“æœè§£è¯»
```
â•”â•â•â• æµ‹è¯•æ‘˜è¦ â•â•â•â•—
â•‘ æ€»å…³èŠ‚æ•°:    32 â•‘
â•‘ é€šè¿‡:        30 â•‘
â•‘ å¤±è´¥:         2 â•‘
â•‘ æˆåŠŸç‡:    93.8% â•‘
â•‘ æ€»æ—¶é—´:    45.2m â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**è´¨é‡è¯„ä¼°æ ‡å‡†ï¼š**
- ğŸ† **ä¼˜ç§€** (95%+) - å¯ç›´æ¥éƒ¨ç½²
- ğŸ‘ **è‰¯å¥½** (85-95%) - è½»å¾®è°ƒæ•´åéƒ¨ç½²
- âš ï¸ **éœ€å…³æ³¨** (70-85%) - éœ€è¦æ£€æŸ¥å’Œç»´æŠ¤
- âŒ **ä¸åˆæ ¼** (<70%) - éœ€è¦é‡å¤§ç»´ä¿®

## âš™ï¸ é…ç½®é€‰é¡¹

### ç”µæœºå‹å·æ”¯æŒ
| å‹å· | æ‰­çŸ©èŒƒå›´ (NM) | é€‚ç”¨å…³èŠ‚ |
|------|---------------|----------|
| 30-40 | -30 ~ 30 | å°å‹å…³èŠ‚ |
| 100-120 | -188 ~ 188 | å¤§å‹å…³èŠ‚ |
| 70-90 | -64 ~ 64 | ä¸­å‹å…³èŠ‚ |

### æµ‹è¯•å‚æ•°
```bash
--max-torque VALUE     # æœ€å¤§æµ‹è¯•æ‰­çŸ© (é»˜è®¤: 4.0 NM)
--torque-step VALUE    # æ‰­çŸ©æ­¥è¿› (é»˜è®¤: 0.1 NM)
--threshold VALUE      # ä½ç½®æ£€æµ‹é˜ˆå€¼ (é»˜è®¤: 0.02 rad)
--wait-time VALUE      # ç¨³å®šç­‰å¾…æ—¶é—´ (é»˜è®¤: 500 ms)
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. CANè®¾å¤‡è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥è®¾å¤‡æƒé™
sudo chmod 666 /dev/ttyUSB*

# æ£€æŸ¥CANé©±åŠ¨
lsmod | grep can
```

**2. ç¼–è¯‘é”™è¯¯**
```bash
# æ£€æŸ¥åº“æ–‡ä»¶
ls -la lib/libcontrolcan.so

# æ·»åŠ åº“è·¯å¾„
export LD_LIBRARY_PATH=./lib:$LD_LIBRARY_PATH
```

**3. å…³èŠ‚æ— å“åº”**
- æ£€æŸ¥å…³èŠ‚IDé…ç½®
- éªŒè¯CANæ€»çº¿è¿æ¥
- ç¡®è®¤ç”µæºä¾›åº”
- æ£€æŸ¥å…³èŠ‚æ˜¯å¦å¤„äºä½¿èƒ½çŠ¶æ€

**4. æµ‹è¯•æ•°æ®å¼‚å¸¸**
- ç¡®è®¤å…³èŠ‚å¯è‡ªç”±ç§»åŠ¨
- æ£€æŸ¥å‘¨å›´æ˜¯å¦æœ‰éšœç¢ç‰©
- éªŒè¯å…³èŠ‚æ ‡å®šçŠ¶æ€
- è°ƒæ•´æµ‹è¯•å‚æ•°é˜ˆå€¼

## ğŸ›¡ï¸ å®‰å…¨é¡»çŸ¥

âš ï¸ **é‡è¦å®‰å…¨æé†’**

1. **æµ‹è¯•å‰å‡†å¤‡**
   - ç¡®ä¿æœºå™¨äººå¤„äºå®‰å…¨ä½ç½®
   - æ¸…é™¤å…³èŠ‚å‘¨å›´éšœç¢ç‰©
   - æ£€æŸ¥ç´§æ€¥åœæ­¢æŒ‰é’®åŠŸèƒ½
   - ç¡®ä¿æœ‰è¶³å¤Ÿçš„æ´»åŠ¨ç©ºé—´

2. **æµ‹è¯•è¿‡ç¨‹ä¸­**
   - ç¦æ­¢æ‰‹åŠ¨è§¦ç¢°ç§»åŠ¨å…³èŠ‚
   - ä¿æŒå®‰å…¨è·ç¦»
   - éšæ—¶å‡†å¤‡æŒ‰ä¸‹Ctrl+Cç´§æ€¥åœæ­¢
   - ç›‘æ§ç”µæœºæ¸©åº¦ï¼Œé¿å…è¿‡çƒ­

3. **å¼‚å¸¸å¤„ç†**
   - ç«‹å³æŒ‰ä¸‹ç´§æ€¥åœæ­¢
   - æ£€æŸ¥å…³èŠ‚çŠ¶æ€
   - è®°å½•å¼‚å¸¸ç°è±¡
   - è”ç³»æŠ€æœ¯æ”¯æŒ

## ğŸ“ˆ å¼€å‘è®¡åˆ’

### å½“å‰ç‰ˆæœ¬ (v2.0)
- âœ… 32å…³èŠ‚å…¨è¦†ç›–æµ‹è¯•
- âœ… PTåè®®å®Œæ•´å®ç°
- âœ… å¹¶è¡Œæµ‹è¯•æ”¯æŒ
- âœ… è¯¦ç»†ç»“æœæŠ¥å‘Š

### è®¡åˆ’åŠŸèƒ½ (v2.1)
- ğŸ”„ Webç•Œé¢æ”¯æŒ
- ğŸ”„ å®æ—¶æ•°æ®å¯è§†åŒ–
- ğŸ”„ äº‘ç«¯æ•°æ®åŒæ­¥
- ğŸ”„ AIå¼‚å¸¸æ£€æµ‹

### æœªæ¥è§„åˆ’ (v3.0)
- ğŸ“‹ å¤šæœºå™¨äººç®¡ç†
- ğŸ“‹ å†å²æ•°æ®åˆ†æ
- ğŸ“‹ é¢„æµ‹æ€§ç»´æŠ¤
- ğŸ“‹ ç§»åŠ¨ç«¯ç›‘æ§

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# å¼€å‘ä¾èµ–
sudo apt-get install valgrind gdb

# ä»£ç æ ¼å¼åŒ–
sudo apt-get install clang-format

# è¿è¡Œæµ‹è¯•
make test
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ æ”¯æŒä¸è”ç³»

- **æŠ€æœ¯æ”¯æŒ**: [support@bridgedp.com](mailto:support@bridgedp.com)
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/your-username/robot-friction-test/issues)
- **åŠŸèƒ½è¯·æ±‚**: [GitHub Discussions](https://github.com/your-username/robot-friction-test/discussions)
- **æ–‡æ¡£Wiki**: [Project Wiki](https://github.com/your-username/robot-friction-test/wiki)

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢BridgeDPæœºå™¨äººå›¢é˜Ÿçš„æŠ€æœ¯æ”¯æŒ
- æ„Ÿè°¢å¼€æºç¤¾åŒºæä¾›çš„CANé€šä¿¡åº“
- æ„Ÿè°¢æ‰€æœ‰æµ‹è¯•äººå‘˜å’Œåé¦ˆç”¨æˆ·

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#robot-friction-test-system)**

Made with â¤ï¸ by BridgeDP Robotics Team

</div>
